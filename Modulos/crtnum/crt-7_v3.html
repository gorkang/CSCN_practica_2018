<!doctype html>
<html>
    <head>
        <title>Experimento CRT-7</title>
        <!-- INICIO llamadas de JS, JQuery y CSS -->

        <!--
        Notas:
        * Este template asume que el archivo HTML a ejecutar, se encuentra en el mismo directorio que las
        carpetas de JsPsych, de imagenes y otros recursos a utilizar. Si se desea emplear otra estructura para
        ordenar las carpetas, se deben realizar los cambios respectivos en las llamadas a dichos recursos.
        * Si bien se listan todos los plugins empleados en la bateria completa, cuando se quiere ejecutar un modulo
        en particular, no es necesario que esten todas, para lo cual basta con dejar las que se requieren y borrar
        el resto.
        * Dado que la distribucion de elementos e imagenes en pantallas esta fijada para resoluciones de 1920x1080,
        hay elementos que se veran de forma erronea en otras resoluciones. Para corregir esto, se deben editar los
        valores respectivos en el archivo style.css
        * Para cumplir los requerimientos de cada prueba, los archivos javascript de varios plugin fueron
        modificados de distinta forma, por lo tanto, se recomienda emplear la carpeta que contiene los plugins
        modificados. En caso contrario, los experimentos pueden no comportarse de la forma esperada, o
        bien, simplemente no funcionar.
        -->

        <!-- JQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- Libreria principal JsPsych -->
        <script src="jspsych-5.0.3/jspsych.js"></script>

        <!-- Plugin para recibir texto estilo survey -->
        <script src="jspsych-5.0.3/plugins/jspsych-survey-text.js"></script>
        <script src="jspsych-5.0.3/plugins/jspsych-survey-textnum2.js"></script>
        <!-- Plugin custom numeracy -->
        <script src="jspsych-5.0.3/plugins/jspsych-survey-textnum1.js"></script>
        <!-- Plugin para desplegar elementos tipo instrucciones -->
        <script src="jspsych-5.0.3/plugins/jspsych-instructions.js"></script>
        <!-- Plugin custom multi choice 2 -->
        <script src="jspsych-5.0.3/plugins/jspsych-survey-multi-choice2.js"></script>

        <!-- Documento CSS principal -->
        <link rel="stylesheet" type="text/css" href="style.css">

        <!-- Libreria para alertas customizadas + CSS respectivo -->
        <script src="dist/sweetalert.min.js"></script>
        <link rel="stylesheet" type="text/css" href="dist/sweetalert.css">

        <!-- FIN llamadas de JS, JQuery y CSS -->
    </head>
    <body>
        <script>

            // Funciones de apoyo
            function block_fkeys(event){
                var x = event.which || event.keyCode;
                if(x == 112 || x == 113 || x == 114 || x == 115 || x == 116 || x == 117 || x == 118 || x == 119 || x == 120 || x == 121 || x == 122 || x == 123 ){
                    console.log("Blocked key");
                    event.preventDefault();
                    return false;
                }else{
                    return;
                }
            }

            function block_enter(event){
                var x = event.which || event.keyCode;
                if(x == 13){
                    console.log("Blocked enter key");
                    event.preventDefault();
                    return false;
                }else{
                    return;
                }
            }

            // Inicio prueba
            var crtNumintro={
                type: "instructions",
                pages: ["<div class = centerbox>"+
                       //"<p class = center-block-text>"+
                       "<p>"+
                       "CRT-V.<br /><br />"+
                       "Presiona ENTER para continuar<br /><br />"+
                       "</p></div>"],
                allow_keys: true,
                show_clickable_nav: true,
                timing_post_trial: 50,
                data:{trialid: "Intro_crtNum"}
            };

            var crtNumexplanation={
                type: "instructions",
                pages: ["<div class = centerbox>"+
                       //"<p class = center-block-text>"+
                       "<p>"+
                       "En las siguientes p&aacute;ginas vas a ver varios &iacute;tems que difieren en dificultad.<br /><br />"+
                       "Responde todos los que puedas<br /><br />"+
                       "</p></div>"],
                allow_keys: false,
                show_clickable_nav: true,
                timing_post_trial: 50,
                data:{trialid: "Instructions_crtNum"}
            };

            var crtNum1 = {
                type: "survey-text",
                endword: "pesos",
                timeline: [
                    {questions: ["<p class='limitnumeracy'>1. Un bate y una pelota cuestan $1.100 en total. El bate cuesta $1.000 m&aacute;s que la pelota., &iquest;Cu&aacute;nto cuesta la pelota?</p>"], data:{trialid: "LIP_01"}},
                    //{questions: ["<p class='limitnumeracy'>3. La probabilidad de ganar un auto en el RIVERA EDICIONES es de 1 de cada 1000.<br /> &iquest;Que porcentaje de boletos de RIVERA EDICIONES ganan un auto?</p>"], data:{trialid: "LIP_03"}}
                ]
            };
            var crtNum2 = {
                type: "survey-text",
                endword: "dias",
                timeline: [
                    {questions: ["<p class='limitnumeracy'>2. Si Jos&eacute; puede beber un barril de agua en 6 d&iacute;as y Mar&iacute;a puede beber un barril de agua en 12 d&iacute;as, &iquest;Cu&aacute;nto se demorar&iacute;an en tomar un barril de agua juntos?</p>"], data:{trialid: "LIP_02"}},
                    //{questions: ["<p class='limitnumeracy'>3. La probabilidad de ganar un auto en el RIVERA EDICIONES es de 1 de cada 1000.<br /> &iquest;Que porcentaje de boletos de RIVERA EDICIONES ganan un auto?</p>"], data:{trialid: "LIP_03"}}
                ]
            };
            var crtNum3 = {
                type: "survey-text",
                endword: "minutos",
                timeline: [
                    {questions: ["<p class='limitnumeracy'>3. Si 5 m&aacute;quinas demoran 5 minutos en hacer 5 aparatos., &iquest;Cu&aacute;nto tiempo se demorar&iacute;an 100 m&aacute;quinas en hacer 100 aparatos?</p>"], data:{trialid: "LIP_03"}},
                    //{questions: ["<p class='limitnumeracy'>3. La probabilidad de ganar un auto en el RIVERA EDICIONES es de 1 de cada 1000.<br /> &iquest;Que porcentaje de boletos de RIVERA EDICIONES ganan un auto?</p>"], data:{trialid: "LIP_03"}}
                ]
            };
            var crtNum4 = {
                type: "survey-text",
                endword: "estudiantes",
                timeline: [
                    {questions: ["<p class='limitnumeracy'>4. Pedro recibi&oacute; tanto la quinceava nota m&aacute;s alta como la quinceava nota m&aacute;s baja en su clase, &iquest;Cu&aacute;ntos estudiantes hay en la clase?</p>"], data:{trialid: "LIP_04"}},
                    //{questions: ["<p class='limitnumeracy'>3. La probabilidad de ganar un auto en el RIVERA EDICIONES es de 1 de cada 1000.<br /> &iquest;Que porcentaje de boletos de RIVERA EDICIONES ganan un auto?</p>"], data:{trialid: "LIP_03"}}
                ]
            };
            var crtNum5 = {
                type: "survey-text",
                endword: "pesos",
                timeline: [
                    {questions: ["<p class='limitnumeracy'>5. Un hombre compra un cerdo a $60.000, lo vende a $70.000, lo vuelve a comprar por $80.000 y finalmente lo vende por $90.000. &iquest;cu&aacute;nto ha ganado?</p>"], data:{trialid: "LIP_05"}}//,
                    //{questions: ["<p class='limitnumeracy'>3. La probabilidad de ganar un auto en el RIVERA EDICIONES es de 1 de cada 1000.<br /> &iquest;Que porcentaje de boletos de RIVERA EDICIONES ganan un auto?</p>"], data:{trialid: "LIP_03"}}
                ]
            };



            var crtNum6 = {
                type: "survey-multi-choice2",
                timeline: [
                           {questions: ["6.Simón decide invertir $8.000.000 en el mercado de acciones un d&iacute;a a inicios de 2008."+
                           " Seis meses despu&eacute;s de haber invertido, el 17 de julio, las acciones que hab&iacute;a comprado bajaron un 50%."+
                           "Afortunadamente para Sim&oacute;n, desde el 17 de julio hasta el 17 de octubre, las acciones que hab&iacute;a comprado subieron un 75%."+
                           " En este momento, Sim&oacute;n ha:"],
                            options: [["a) No ha ganado ni perdido dinero",
                            "b) Ha ganado dinero",
                            "c) Ha perdido dinero"]]}
                           ],
                required: true
            };


            var crtNum3_a = {
                type: "survey-text",
                endword: "dias",
                timeline: [
                    //normal
                    //{questions: ["<p class='limitnumeracy'>6. Si el riesgo de padecer una enfermedad en los proximos 10 a&ntilde;os para una<br /> persona (A) es de 1% y el riesgo para otra persona (B) es el doble, &iquest;cu&aacute;l es<br /> el riesgo para la persona B?</p>"], data:{trialid: "LIP_06"}},
                    {questions: ["<p class='limitnumeracy'>7. En un lago hay un manto de hojas de lirios. Cada d&iacute;a el manto dobla su tamaño."+
                    "Si el manto de lirios se demora 48 d&iacute;as en cubrir el lago completo"+
                    "&iquest;cu&aacute;l es el riesgo para la persona B?</p>"], data:{trialid: "LIP_06"}}
                ]
            };


            // Creacion de timeline e inclusion de trials
            experimento_crtNum = [];
            experimento_crtNum.push(crtNumintro);

            experimento_crtNum.push(crtNumexplanation);
            experimento_crtNum.push(crtNum1);

            experimento_crtNum.push(crtNum2);
            experimento_crtNum.push(crtNum3);
            experimento_crtNum.push(crtNum4);
            experimento_crtNum.push(crtNum5);
            experimento_crtNum.push(crtNum6);

            experimento_crtNum.push(crtNum3_a);

            // Inicializacion
            jsPsych.init({
                timeline: experimento_crtNum,
                fullscreen: false,
                on_trial_start: function(){
                    document.onkeypress = block_fkeys;
                    document.onkeypress = block_enter;
                },
                on_finish: function(){
                jsPsych.data.localSave('modulo_crtNum.csv', 'csv');
                },
                default_iti: 0
            });

        </script>
    </body>
</html>
